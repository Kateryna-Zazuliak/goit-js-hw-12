{"version":3,"file":"commonHelpers.js","sources":["../src/img/error.png","../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAENSURBVHgBrZVhDoIwDIUrgfDXm+hRvBFwEr0BXsXjsJnMFVkYsvUV4SWL6Nr3MWgrUUbW2sYY6zSLY3M+Zc7cOWr9evqvL5J18av1OVRVVUdI4c6HwTxIKY5FJ/nbXA3ZYw4hR5hnIZK5MeaKDFMxC8jX3PapRPTi5lJOQWzPewHQpgz49xxkPrmcKwJyEGQe55UEVNdV64P5cmwm1tSEHe+hfAj4hUwAlTmrIKWKglzqGkl1gmg2hVmjnj0QEJuHxxK/EwiRqkGqFqmE433YaJpSFBttDnrfUxACSsWw1+LmJMhWrcyDjoBkzY+AQPM9EMl81QdhLJxOrvGfZ1L96bvblvExaj4JXtJj+QAn5UUxjHYd+gAAAABJRU5ErkJggg==\"","import axios from 'axios';\nimport imageUrl from '../img/error.png';\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\nexport async function getResearch(gallery, currentPage, perPage) {\n    const BASE_URL = 'https://pixabay.com';\n    const END_POINT = '/api/';\n    const params = new URLSearchParams({\n        key: '44398690-5434b83d57176502a6803f4be',\n        q: gallery,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: currentPage,\n        per_page: perPage,\n    });\n    const url = `${BASE_URL}${END_POINT}?${params}`;\n    try {\n        const res = await axios.get(url);\n        return res.data;\n    } catch (err) {\n        console.log(err);\n        iziToast.error({\n        message: 'Error',\n        });\n    };\n}\n\n","export const refs = {\n    formElem: document.querySelector('.form-search'),\n    inputElem: document.querySelector('.input-search'),\n    btnElem: document.querySelector('.btn-search'),\n    galleryElem: document.querySelector('.gallery-list'),\n    loader: document.querySelector('.loader'),\n    btnLoadMore: document.querySelector('.btn-load'),\n    targetElem: document.querySelector('.js-target'),\n};\n\nexport function showLoader() {\n    refs.loader.classList.remove('visually-hidden');\n}\nexport function hideLoader() {\n    refs.loader.classList.add('visually-hidden');\n}\n\nexport function markupResearch(gallery) {\n    const markup = gallery.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => {\n    return `<li class=\"gallery-item\">\n<a class=\"gallery-link\" href=\"${largeImageURL}\"><img class=\"gallery-img\" src=\"${webformatURL}\" alt=\"${tags}\"/></a>\n<div class=\"img-info\">\n<div class=\"img-info-item\"><p class=\"img-info-value\"><strong>Likes</strong></p><p>${likes}</p></div>\n<div class=\"img-info-item\"><p class=\"img-info-value\"><strong>Views</strong></p><p>${views}</p></div>\n<div class=\"img-info-item\"><p class=\"img-info-value\"><strong>Comments</strong></p><p>${comments}</p></div>\n<div class=\"img-info-item\"><p class=\"img-info-value\"><strong>Downloads</strong></p><p>${downloads}</p></div></div></li>`\n    }).join('');\n    refs.galleryElem.insertAdjacentHTML('beforeend', markup);\n}","\nimport { getResearch } from './js/pixabay-api.js';\nimport {markupResearch, showLoader, hideLoader, refs } from './js/render-functions.js';\nimport imageUrl from './img/error.png';\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n\nexport let currentPage = 1;\nexport let gallery = '';\nexport const perPage = 15;\n\n\nrefs.formElem.addEventListener('submit', async event => {\n    event.preventDefault();\n    gallery = refs.inputElem.value.trim();\n    refs.galleryElem.innerHTML = '';\n    if (gallery === '' || gallery === ' ') {\n        refs.galleryElem.innerHTML = '';\n        hideLoadBtn();\n        iziToast.error({\n            position: 'topRight',\n            theme: 'dark',\n            messageColor: 'white',\n            iconUrl: imageUrl,\n            backgroundColor: '#ef4040',\n            message: 'Please enter a search word.',\n        });\n    } else {\n        currentPage = 1;\n        await fetchImages();\n    }\n});\n\nrefs.btnLoadMore.addEventListener('click', async () => {\n  currentPage += 1;\n  await fetchImages();\n});\n\nasync function fetchImages() {\n    showLoader();\n    hideLoadBtn();\n    try {\n        const arr = await getResearch(gallery, currentPage, perPage);\n        if (arr.hits.length === 0) {\n            hideLoadBtn();\n            iziToast.error({\n                position: 'topRight',\n                theme: 'dark',\n                messageColor: 'white',\n                iconUrl: imageUrl,\n                backgroundColor: '#ef4040',\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n            });\n            refs.galleryElem.innerHTML = '';\n        } else {\n            showLoadBtn();\n            markupResearch(arr.hits);\n            scrollElements();\n            let newGallery = new SimpleLightbox('.gallery-link', {\n                captionsData: 'alt',\n                captionPosition: 'bottom',\n                captionDelay: 250,\n            }).refresh();\n\n            newGallery.on('error.simplelightbox', function (e) {\n                console.log(e);\n            });\n            if (arr.hits.length < 15 || currentPage * 15 >= arr.totalHits) {\n                refs.galleryElem.innerHTML = '';\n                hideLoadBtn();\n                iziToast.info({\n                    position: 'topRight',\n                    theme: 'dark',\n                    messageColor: 'white',\n                    iconUrl: imageUrl,\n                    backgroundColor: '#ef4040',\n                    message: \"We're sorry, but you've reached the end of search results.\",\n                });\n            } else {\n                showLoadBtn();\n            }\n        };\n    } catch (err) {\n        console.log(err);\n        iziToast.error({\n        position: 'topRight',\n        theme: 'dark',\n        messageColor: 'white',\n        iconUrl: imageUrl,\n        backgroundColor: '#ef4040',\n        message: \"Something was wrong.\",});\n    } finally {\n        hideLoader();\n        refs.inputElem.value = '';\n    };\n}\n\nfunction scrollElements() {\n    const liElem = refs.galleryElem.firstElementChild;\n    const height = liElem.getBoundingClientRect().height;\n    scrollBy({\n        top: height * 2,\n        behavior: 'smooth',\n    });\n}\nfunction showLoadBtn() {\n    refs.btnLoadMore.classList.remove('visually-hidden');\n};\nfunction hideLoadBtn() {\n    refs.btnLoadMore.classList.add('visually-hidden');\n};"],"names":["imageUrl","getResearch","gallery","currentPage","perPage","BASE_URL","END_POINT","params","url","axios","err","iziToast","refs","showLoader","hideLoader","markupResearch","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","event","hideLoadBtn","fetchImages","arr","showLoadBtn","scrollElements","SimpleLightbox","e","height"],"mappings":"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"}